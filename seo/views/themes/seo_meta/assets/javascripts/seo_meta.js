"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t("object"===("undefined"==typeof exports?"undefined":_typeof(exports))?require("jquery"):jQuery)}(function(t){function e(o,n){this.$element=t(o),this.options=t.extend({},e.DEFAULTS,t.isPlainObject(n)&&n),this.focusedInputID="",this.init()}var o='.qor-seo__settings input[type="text"],.qor-seo__settings textarea[name]:visible';return e.prototype={constructor:e,init:function(){var t=this.$element;this.$addTgas=t.find(".qor-seo-tag"),this.bind()},bind:function(){this.$element.on("click.qor.seo",".qor-seo__defaults-input",this.toggleDefault.bind(this)).on("click.qor.seo",".qor-seo-submit",this.submitSeo.bind(this)).on("click keyup",o,this.tagInputsFocus.bind(this)).on("blur.qor.seo",o,this.tagInputsBlur.bind(this)).on("click.qor.seo",".qor-seo-tag",this.addTags.bind(this))},unbind:function(){this.$element.off("click.qor.seo").off("click keyup").off("blur.qor.seo")},toggleDefault:function(){this.$element.find(".qor-seo__settings").toggle()},tagInputsFocus:function(){this.$addTgas.addClass("focus");var e=t(document.activeElement);this.focusedInputID=e.prop("name"),this.focusedInputStart=e[0].selectionStart,this.focusedInputEnd=e[0].selectionEnd,this.focusedInputVal=e.val()},tagInputsBlur:function(){this.$addTgas.removeClass("focus"),this.$focusedInputID=!1},addTags:function(e){if(this.focusedInputID){var o="",n=this.focusedInputVal.substring(0,this.focusedInputStart),s=this.focusedInputVal.substring(this.focusedInputEnd,this.focusedInputVal.length);o=n+("{{"+t(e.currentTarget).data("tagValue")+"}}")+s,this.$element.find('[name="'+this.focusedInputID+'"]').val(o).focus(),this.focusedInputID=!1}},submitSeo:function(){var e=this.$element,o=e.find(".qor-form");return t(".qor-seo-alert").hide(),t.ajax({method:"POST",url:o.attr("action"),data:new FormData(o[0]),processData:!1,contentType:!1,dataType:"json",success:function(){window.onbeforeunload=null,t.fn.qorSlideoutBeforeHide=null,t(".qor-seo-alert.qor-alert--success").show(),setTimeout(function(){t(".qor-alert--success").hide()},3e3)},error:function(){t(".qor-seo-alert.qor-alert--error").show()}}),!1},destroy:function(){this.unbind(),this.$element.removeData("qor.seo")}},e.DEFAULTS={},e.plugin=function(o){return this.each(function(){var n,s=t(this),i=s.data("qor.seo");if(!i){if(/destroy/.test(o))return;s.data("qor.seo",i=new e(this,o))}"string"==typeof o&&t.isFunction(n=i[o])&&n.apply(i)})},t(function(){var o={};t(document).on("click.qor.fixedAlert",'[data-dismiss="fixed-alert"]',function(){t(this).closest(".qor-alert").hide()}).on("disable.qor.seo",function(o){e.plugin.call(t('[data-toggle="qor.seo"]',o.target),"destroy")}).on("enable.qor.seo",function(n){e.plugin.call(t('[data-toggle="qor.seo"]',n.target),o)}).triggerHandler("enable.qor.seo")}),e});